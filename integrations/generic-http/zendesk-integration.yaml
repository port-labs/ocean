createMissingRelatedEntities: true
deleteDependentEntities: true
resources:
  - kind: /api/v2/tickets.json
    selector:
      query: 'true'
      method: GET
      data_path: .tickets
    port:
      entity:
        mappings:
          identifier: .id | tostring
          title: .subject
          blueprint: '"zendesk_ticket"'
          properties:
            status: .status
            priority: .priority
            requester_id: .requester_id | tostring
            url: .url
            created_at: .created_at
            updated_at: .updated_at
            description: .description
  - kind: /api/v2/organizations.json
    selector:
      query: 'true'
      method: GET
      data_path: .organizations
    port:
      entity:
        mappings:
          identifier: .id | tostring
          title: .name
          blueprint: '"zendesk_organization"'
          properties:
            url: .url
            created_at: .created_at
            updated_at: .updated_at
  - kind: /api/v2/users.json
    selector:
      query: 'true'
      method: GET
      data_path: .users
    port:
      entity:
        mappings:
          identifier: .id | tostring
          title: .name
          blueprint: '"zendesk_user"'
          properties:
            email: .email
            role: .role
            organization_id: .organization_id | tostring
            profile_url: .photo.content_url // ""
            active: .active
            verified: .verified
